# è´¡çŒ®æŒ‡å—

> **ä½œè€…**: ruan
> **æœ€åæ›´æ–°**: 2025-11-07

## æ¬¢è¿è´¡çŒ®

æ„Ÿè°¢ä½ å¯¹ SimpleServerStatus çš„å…³æ³¨ï¼æˆ‘ä»¬æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ï¼š

- ğŸ› æŠ¥å‘Š Bug
- âœ¨ æå‡ºæ–°åŠŸèƒ½å»ºè®®
- ğŸ“ æ”¹è¿›æ–‡æ¡£
- ğŸ’» æäº¤ä»£ç 

## è¡Œä¸ºå‡†åˆ™

ä¸ºäº†è¥é€ å¼€æ”¾å‹å¥½çš„ç¯å¢ƒï¼Œæˆ‘ä»¬æ‰¿è¯ºï¼š

- âœ… ä½¿ç”¨å‹å¥½å’ŒåŒ…å®¹çš„è¯­è¨€
- âœ… å°Šé‡ä¸åŒçš„è§‚ç‚¹å’Œç»éªŒ
- âœ… ä¼˜é›…åœ°æ¥å—å»ºè®¾æ€§æ‰¹è¯„
- âŒ ç¦æ­¢äººèº«æ”»å‡»ã€éªšæ‰°æˆ–ä¸ä¸“ä¸šçš„è¡Œä¸º

## å¼€å§‹ä¹‹å‰

### ç¯å¢ƒæ­å»º

è¯·å…ˆé˜…è¯» [å¼€å‘ç¯å¢ƒæ­å»º](./setup.md) æ–‡æ¡£ï¼Œç¡®ä¿å¼€å‘ç¯å¢ƒå·²æ­£ç¡®é…ç½®ã€‚

### äº†è§£é¡¹ç›®

å»ºè®®å…ˆé˜…è¯»ä»¥ä¸‹æ–‡æ¡£ï¼š

- [æ¶æ„æ¦‚è§ˆ](../architecture/overview.md) - äº†è§£ç³»ç»Ÿæ¶æ„
- [WebSocket é€šä¿¡è®¾è®¡](../architecture/websocket.md) - äº†è§£é€šä¿¡æœºåˆ¶
- [æ•°æ®æµå‘](../architecture/data-flow.md) - äº†è§£æ•°æ®æµè½¬

## æŠ¥å‘Š Bug

### æäº¤å‰æ£€æŸ¥

1. **æœç´¢å·²æœ‰ Issue** - æ£€æŸ¥é—®é¢˜æ˜¯å¦å·²è¢«æŠ¥å‘Š
2. **ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬** - ç¡®è®¤é—®é¢˜åœ¨æœ€æ–°ç‰ˆæœ¬ä¸­ä»å­˜åœ¨
3. **å‡†å¤‡è¯¦ç»†ä¿¡æ¯** - æ”¶é›†å¿…è¦çš„è°ƒè¯•ä¿¡æ¯

### Bug æŠ¥å‘Šæ¨¡æ¿

```markdown
**Bug æè¿°**
ç®€æ´æ¸…æ™°åœ°æè¿° bug

**å¤ç°æ­¥éª¤**
1. å¯åŠ¨ '...'
2. é…ç½® '...'
3. æ‰§è¡Œ '...'
4. çœ‹åˆ°é”™è¯¯

**é¢„æœŸè¡Œä¸º vs å®é™…è¡Œä¸º**
- é¢„æœŸ: [æè¿°æœŸæœ›]
- å®é™…: [æè¿°å®é™…]

**ç¯å¢ƒä¿¡æ¯**
- æ“ä½œç³»ç»Ÿ: [å¦‚ Ubuntu 22.04]
- Go ç‰ˆæœ¬: [å¦‚ 1.23.2]
- é¡¹ç›®ç‰ˆæœ¬: [å¦‚ v1.0.0]

**æ—¥å¿—è¾“å‡º**
```log
ç²˜è´´ç›¸å…³æ—¥å¿—
```
```

## æå‡ºåŠŸèƒ½å»ºè®®

```markdown
**åŠŸèƒ½æè¿°**
æ¸…æ™°æè¿°å¸Œæœ›å®ç°çš„åŠŸèƒ½

**ä½¿ç”¨åœºæ™¯**
æè¿°è¿™ä¸ªåŠŸèƒ½è§£å†³ä»€ä¹ˆé—®é¢˜

**ä¼˜å…ˆçº§**
- [ ] é«˜ï¼ˆæ ¸å¿ƒåŠŸèƒ½ç¼ºå¤±ï¼‰
- [ ] ä¸­ï¼ˆé‡è¦æ”¹è¿›ï¼‰
- [ ] ä½ï¼ˆå¯æœ‰å¯æ— ï¼‰
```

## ä»£ç è´¡çŒ®æµç¨‹

### 1. Fork é¡¹ç›®

```bash
# 1. åœ¨ GitHub ä¸Šç‚¹å‡» Fork æŒ‰é’®

# 2. å…‹éš†ä½ çš„ fork
git clone https://github.com/YOUR_USERNAME/simple-server-status.git
cd simple-server-status

# 3. æ·»åŠ ä¸Šæ¸¸ä»“åº“
git remote add upstream https://github.com/ruanun/simple-server-status.git
```

### 2. åˆ›å»ºåˆ†æ”¯

```bash
# æ›´æ–° master åˆ†æ”¯
git checkout master
git pull upstream master

# åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ï¼ˆä½¿ç”¨æè¿°æ€§åç§°ï¼‰
git checkout -b feature/add-memory-alerts
```

**åˆ†æ”¯å‘½åè§„èŒƒ**:

- `feature/` - æ–°åŠŸèƒ½
- `fix/` - Bug ä¿®å¤
- `docs/` - æ–‡æ¡£æ”¹è¿›
- `refactor/` - ä»£ç é‡æ„
- `test/` - æµ‹è¯•ç›¸å…³

### 3. ç¼–å†™ä»£ç 

#### ä»£ç è§„èŒƒ

**Go ä»£ç **:

```bash
# è¿è¡Œ golangci-lint
golangci-lint run

# æ ¼å¼åŒ–ä»£ç 
go fmt ./...

# æ•´ç†ä¾èµ–
go mod tidy
```

**TypeScript ä»£ç **:

```bash
cd web
pnpm run type-check  # ç±»å‹æ£€æŸ¥
pnpm run lint        # ä»£ç æ£€æŸ¥
```

#### ç¼–ç æœ€ä½³å®è·µ

**Go**:

- âœ… ä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡å
- âœ… å¤„ç†æ‰€æœ‰é”™è¯¯ï¼ˆä¸è¦å¿½ç•¥ï¼‰
- âœ… ä½¿ç”¨ `context.Context` æ”¯æŒå–æ¶ˆ
- âœ… é¿å…å…¨å±€å˜é‡ï¼Œä½¿ç”¨ä¾èµ–æ³¨å…¥
- âœ… å¹¶å‘è®¿é—®ä½¿ç”¨ mutex ä¿æŠ¤
- âœ… defer å…³é—­èµ„æº

**TypeScript**:

- âœ… ä½¿ç”¨ TypeScript ç±»å‹æ³¨è§£
- âœ… é¿å…ä½¿ç”¨ `any` ç±»å‹
- âœ… ä½¿ç”¨ Composition API
- âœ… ç»„ä»¶èŒè´£å•ä¸€

### 4. ç¼–å†™æµ‹è¯•

```go
// å•å…ƒæµ‹è¯•ç¤ºä¾‹
func TestNetworkStatsCollector_Concurrent(t *testing.T) {
    nsc := NewNetworkStatsCollector()

    var wg sync.WaitGroup
    wg.Add(2)

    go func() {
        defer wg.Done()
        for i := 0; i < 1000; i++ {
            nsc.Update(uint64(i), uint64(i*2))
        }
    }()

    go func() {
        defer wg.Done()
        for i := 0; i < 1000; i++ {
            _, _ = nsc.GetStats()
        }
    }()

    wg.Wait()
}
```

è¿è¡Œæµ‹è¯•:

```bash
go test ./...           # è¿è¡Œæ‰€æœ‰æµ‹è¯•
go test -v ./...        # è¯¦ç»†è¾“å‡º
go test -cover ./...    # æµ‹è¯•è¦†ç›–ç‡
go test -race ./...     # ç«æ€æ£€æµ‹
```

### 5. æäº¤ä»£ç 

#### Commit Message è§„èŒƒ

ä½¿ç”¨ [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼š

```
<type>(<scope>): <subject>
```

**Typeï¼ˆå¿…å¡«ï¼‰**:

- `feat` - æ–°åŠŸèƒ½
- `fix` - Bug ä¿®å¤
- `docs` - æ–‡æ¡£å˜æ›´
- `style` - ä»£ç æ ¼å¼
- `refactor` - é‡æ„
- `perf` - æ€§èƒ½ä¼˜åŒ–
- `test` - æµ‹è¯•ç›¸å…³
- `chore` - æ„å»ºæˆ–å·¥å…·å˜åŠ¨

**Scopeï¼ˆå¯é€‰ï¼‰**: `agent`, `dashboard`, `web`, `shared`, `docs`

**ç¤ºä¾‹**:

```bash
# å¥½çš„æäº¤æ¶ˆæ¯
git commit -m "feat(agent): æ·»åŠ å†…å­˜å‘Šè­¦åŠŸèƒ½"
git commit -m "fix(dashboard): ä¿®å¤ WebSocket æ–­çº¿é‡è¿é—®é¢˜"
git commit -m "docs: æ›´æ–°å®‰è£…æ–‡æ¡£"

# ä¸å¥½çš„æäº¤æ¶ˆæ¯
git commit -m "update"
git commit -m "fix bug"
```

#### æäº¤æ­¥éª¤

```bash
# æŸ¥çœ‹ä¿®æ”¹
git status

# æ·»åŠ æ–‡ä»¶
git add .

# æäº¤
git commit -m "feat(agent): æ·»åŠ å†…å­˜å‘Šè­¦åŠŸèƒ½"

# æ¨é€åˆ°ä½ çš„ fork
git push origin feature/add-memory-alerts
```

### 6. åˆ›å»º Pull Request

#### PR æè¿°æ¨¡æ¿

```markdown
## å˜æ›´è¯´æ˜

ç®€è¦æè¿°è¿™ä¸ª PR åšäº†ä»€ä¹ˆ

## å˜æ›´ç±»å‹

- [ ] æ–°åŠŸèƒ½ (feature)
- [ ] Bug ä¿®å¤ (fix)
- [ ] æ–‡æ¡£æ›´æ–° (docs)
- [ ] ä»£ç é‡æ„ (refactor)

## ç›¸å…³ Issue

Closes #123

## æµ‹è¯•

- [ ] å•å…ƒæµ‹è¯•é€šè¿‡
- [ ] æ‰‹åŠ¨æµ‹è¯•é€šè¿‡
- [ ] æ–‡æ¡£å·²æ›´æ–°

## æ£€æŸ¥æ¸…å•

- [ ] ä»£ç éµå¾ªé¡¹ç›®è§„èŒƒ
- [ ] å·²è¿›è¡Œè‡ªæˆ‘å®¡æŸ¥
- [ ] å·²æ·»åŠ å¿…è¦æ³¨é‡Š
- [ ] å·²æ›´æ–°ç›¸å…³æ–‡æ¡£
- [ ] å·²æ·»åŠ æµ‹è¯•
- [ ] æ–°æ—§æµ‹è¯•éƒ½é€šè¿‡
```

### 7. ä»£ç å®¡æŸ¥

1. ç»´æŠ¤è€…ä¼šå®¡æŸ¥ä½ çš„ä»£ç 
2. å¯èƒ½ä¼šæå‡ºä¿®æ”¹å»ºè®®
3. æ ¹æ®å»ºè®®è¿›è¡Œä¿®æ”¹
4. æ¨é€æ›´æ–°åˆ°åŒä¸€åˆ†æ”¯ï¼ˆPR ä¼šè‡ªåŠ¨æ›´æ–°ï¼‰

```bash
# æ ¹æ®åé¦ˆä¿®æ”¹ä»£ç å¹¶æäº¤
git add .
git commit -m "refactor: æ ¹æ®å®¡æŸ¥æ„è§ä¼˜åŒ–é€»è¾‘"
git push origin feature/add-memory-alerts
```

### 8. åˆå¹¶åæ¸…ç†

```bash
# PR åˆå¹¶åï¼Œæ›´æ–° master åˆ†æ”¯
git checkout master
git pull upstream master

# åˆ é™¤åŠŸèƒ½åˆ†æ”¯
git branch -d feature/add-memory-alerts
git push origin --delete feature/add-memory-alerts
```

## æ–‡æ¡£è´¡çŒ®

### æ–‡æ¡£è§„èŒƒ

**Markdown æ ¼å¼**:

- âœ… ä½¿ç”¨æ ‡å‡† Markdown è¯­æ³•
- âœ… ä»£ç å—æŒ‡å®šè¯­è¨€ï¼ˆ```go, ```bashï¼‰
- âœ… ä½¿ç”¨æœ‰æ„ä¹‰çš„æ ‡é¢˜å±‚çº§

**å†…å®¹è¦æ±‚**:

- âœ… æ¸…æ™°å‡†ç¡®
- âœ… ç¤ºä¾‹å®Œæ•´å¯è¿è¡Œ
- âœ… é“¾æ¥æœ‰æ•ˆ

### æ–‡æ¡£æäº¤æµç¨‹

ä¸ä»£ç è´¡çŒ®æµç¨‹ç›¸åŒï¼š

```bash
# åˆ›å»ºåˆ†æ”¯
git checkout -b docs/improve-installation-guide

# ä¿®æ”¹æ–‡æ¡£åæäº¤
git add docs/
git commit -m "docs: æ”¹è¿›å®‰è£…æŒ‡å—"
git push origin docs/improve-installation-guide
```

## è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. æŸ¥é˜… [æ–‡æ¡£](../README.md)
2. æœç´¢ [å·²æœ‰ Issue](https://github.com/ruanun/simple-server-status/issues)
3. åˆ›å»ºæ–°çš„ Issue

## è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…ï¼ä½ ä»¬çš„è´¡çŒ®è®©è¿™ä¸ªé¡¹ç›®å˜å¾—æ›´å¥½ã€‚

## ç›¸å…³æ–‡æ¡£

- [å¼€å‘ç¯å¢ƒæ­å»º](./setup.md) - ç¯å¢ƒé…ç½®
- [æ¶æ„æ¦‚è§ˆ](../architecture/overview.md) - äº†è§£ç³»ç»Ÿæ¶æ„

---

**ç‰ˆæœ¬**: 2.0
**ä½œè€…**: ruan
**æœ€åæ›´æ–°**: 2025-11-07
